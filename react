import React, { useState } from 'react';

function App() {
    const [categories, setCategories] = useState([]);
    const [creating, setCreating] = useState(false);
    const [newCategoryName, setNewCategoryName] = useState('');
    const [subcategories, setSubcategories] = useState([]);

    const addSubcategory = () => {
        setSubcategories([...subcategories, '']);
    };

    const updateSubcategoryName = (index, name) => {
        const newSubcategories = [...subcategories];
        newSubcategories[index] = name;
        setSubcategories(newSubcategories);
    };

    const saveCategory = () => {
        const newId = categories.length ? Math.max(...categories.map(c => c.id)) + 1 : 1;
        const newCategory = { id: newId, name: newCategoryName, subcategories };
        setCategories([...categories, newCategory]);
        resetForm();
    };

    const resetForm = () => {
        setNewCategoryName('');
        setSubcategories([]);
        setCreating(false);
    };

    return (
        <div>
            {creating ? (
                <div>
                    <label>
                        Nome da categoria:
                        <input
                            value={newCategoryName}
                            onChange={(e) => setNewCategoryName(e.target.value)}
                        />
                    </label>
                    <div>
                        Subcategorias:
                        {subcategories.map((name, index) => (
                            <input
                                key={index}
                                value={name}
                                onChange={(e) => updateSubcategoryName(index, e.target.value)}
                            />
                        ))}
                    </div>
                    <button onClick={addSubcategory}>+</button>
                    <button onClick={saveCategory}>Salvar</button>
                    <button onClick={resetForm}>Cancelar</button>
                </div>
            ) : (
                <button onClick={() => setCreating(true)}>Criar categoria</button>
            )}
            <ul>
                {categories.map(cat => (
                    <li key={cat.id}>
                        {cat.name}
                        <ul>
                            {cat.subcategories.map((sub, index) => (
                                <li key={index}>{sub}</li>
                            ))}
                        </ul>
                    </li>
                ))}
            </ul>
        </div>
    );
}

export  {App};
